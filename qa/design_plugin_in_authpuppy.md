## Design a new authorized plugin in AuthPuppy [Back](./qa.md)

Firstly, create a `class.php` to contain your plugin, and here I have used myself as the plugin name.

```php
<?php
class apSoundtoothAuthenticator extends apAuthentication {
    /** title of the login page */
    protected $_name = "";
    
    public function initialize(sfWebRequest $request, apBaseIdentity $identity) {
        /** Nothing to do here */
    }
    
    public function process(sfAction $action, sfWebRequest $request, apBaseIdentity $identity) {
        $identity->identify("splash_only", new apDefaultUser(), $this);
    }
    
    public function render() {
        /** return the view you want */
        return include_partial('node/defaultAuthTemplate');
    }
}
```

Secondly, register your plugin in the config list: both `authpuppy/cache/frontend/dev/config/config_autoload.yml.php` and ``

```php
<?php
// auto-generated by sfAutoloadConfigHandler
// date: 2016/07/06 18:43:51
return array(
    /** ... */
  // project_model
  'apactionsv1' => '/var/www/authpuppy/lib/model/authpuppycore/protocol/apActionsV1.php',
  'apauthpuppyconfig' => '/var/www/authpuppy/lib/model/authpuppycore/manage/apAuthpuppyConfig.class.php',
  'apbaseidentity' => '/var/www/authpuppy/lib/model/authpuppycore/identity/apBaseIdentity.class.php',
  'apidentity' => '/var/www/authpuppy/lib/model/authpuppycore/identity/apIdentity.class.php',
  'apdefaultauthenticator' => '/var/www/authpuppy/lib/model/authpuppycore/authentication/apDefaultAuthenticator.class.php',
  'apsoundtoothauthenticator' => '/var/www/authpuppy/lib/model/authpuppycore/authentication/apSoundtoothAuthenticator.class.php',
  'apdefaultuser' => '/var/www/authpuppy/lib/model/authpuppycore/authentication/apDefaultAuthenticator.class.php',
  'apauthenticatormanager' => '/var/www/authpuppy/lib/model/authpuppycore/authentication/apAuthenticatorManager.php',
  'apauthentication' => '/var/www/authpuppy/lib/model/authpuppycore/authentication/apAuthentication.class.php',
  'apwebexecutor' => '/var/www/authpuppy/lib/model/authpuppycore/task/apWebExecutor.class.php',
  'apwebformatter' => '/var/www/authpuppy/lib/model/authpuppycore/task/apWebFormatter.class.php',
  'apmailmessage' => '/var/www/authpuppy/lib/model/authpuppycore/util/apMailMessage.php',
  'apcontext' => '/var/www/authpuppy/lib/model/authpuppycore/util/apContext.class.php',
  'apactions' => '/var/www/authpuppy/lib/model/authpuppycore/util/apActions.class.php',
  'apeventdispatcher' => '/var/www/authpuppy/lib/model/authpuppycore/util/apEventDispatcher.php',
  'aputils' => '/var/www/authpuppy/lib/model/authpuppycore/util/apUtils.php',
  'node' => '/var/www/authpuppy/lib/model/doctrine/Node.class.php',
  'appluginconfig' => '/var/www/authpuppy/lib/model/doctrine/apPluginManagerPlugin/apPluginConfig.class.php',
  'appluginconfigtable' => '/var/www/authpuppy/lib/model/doctrine/apPluginManagerPlugin/apPluginConfigTable.class.php',
  'baseappluginconfig' => '/var/www/authpuppy/lib/model/doctrine/apPluginManagerPlugin/base/BaseapPluginConfig.class.php',
  'nodetable' => '/var/www/authpuppy/lib/model/doctrine/NodeTable.class.php',
  'connectiontable' => '/var/www/authpuppy/lib/model/doctrine/ConnectionTable.class.php',
  'sfguardpermission' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardPermission.class.php',
  'sfguardforgotpasswordtable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardForgotPasswordTable.class.php',
  'sfguardrememberkey' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardRememberKey.class.php',
  'sfguardgrouppermissiontable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardGroupPermissionTable.class.php',
  'sfguardforgotpassword' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardForgotPassword.class.php',
  'sfguardgroup' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardGroup.class.php',
  'sfguardrememberkeytable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardRememberKeyTable.class.php',
  'sfguarduserpermissiontable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserPermissionTable.class.php',
  'sfguardgrouptable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardGroupTable.class.php',
  'sfguardpermissiontable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardPermissionTable.class.php',
  'sfguardusergrouptable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserGroupTable.class.php',
  'sfguardusergroup' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserGroup.class.php',
  'sfguardusertable' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserTable.class.php',
  'sfguarduser' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUser.class.php',
  'basesfguardgroup' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardGroup.class.php',
  'basesfguarduserpermission' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardUserPermission.class.php',
  'basesfguarduser' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardUser.class.php',
  'basesfguardforgotpassword' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardForgotPassword.class.php',
  'basesfguardusergroup' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardUserGroup.class.php',
  'basesfguardrememberkey' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardRememberKey.class.php',
  'basesfguardpermission' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardPermission.class.php',
  'basesfguardgrouppermission' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/base/BasesfGuardGroupPermission.class.php',
  'sfguardgrouppermission' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardGroupPermission.class.php',
  'sfguarduserpermission' => '/var/www/authpuppy/lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserPermission.class.php',
  'basenode' => '/var/www/authpuppy/lib/model/doctrine/base/BaseNode.class.php',
  'baseconnection' => '/var/www/authpuppy/lib/model/doctrine/base/BaseConnection.class.php',
  'connection' => '/var/www/authpuppy/lib/model/doctrine/Connection.class.php',

  // application
  'myuser' => '/var/www/authpuppy/apps/frontend/lib/myUser.class.php',
  'checkdbavailabilityfilter' => '/var/www/authpuppy/apps/frontend/lib/CheckDBAvailabilityFilter.class.php',

  // modules
  'install/apinstalldbform' => '/var/www/authpuppy/apps/frontend/modules/install/lib/form/apInstallDbForm.class.php',
);
```